const loader=document.getElementById("loaderImageAnimate"),galleryImageBlock=document.getElementById("galleryImages"),sliderSingleBlock=document.getElementById("lightGallerySingle"),sliderNavBlock=document.getElementById("lightGalleryNav"),cardIncrease=8,pageCount=Math.ceil(imagesApi.length/cardIncrease);let currentPage=1;const createCard=(item,index)=>{if(!item)return;const card=`<li class="the-media__gallery-image the-media__gallery-image--${index}" data-target="item-${index}">\n                    <div class="the-media__gallery-image-wrap">\n                        <img src="${item.url}" alt="">\n                    </div>\n                    <div class="the-media__gallery-image-caption">${item.title}</div>\n                </li>`;galleryImageBlock.insertAdjacentHTML("beforeend",card)},createCardSlider=(item,index,type)=>{if(!item)return;const titleCard="single"==type?`<div class="lightgallery__image-caption"> ${item.title}</div>`:"",card=`<div class="lightgallery__item">\n                    <div class="lightgallery__image" ${"nav"==type?`data-anchor="item-${index}"`:""}>\n                        <img src="${item.url}" alt="">\n                    </div>\n                    ${titleCard}\n                </div>`;"single"==type?sliderSingleBlock.insertAdjacentHTML("beforeend",card):sliderNavBlock.insertAdjacentHTML("beforeend",card)},addCards=pageIndex=>{currentPage=pageIndex;const startRange=(pageIndex-1)*cardIncrease,endRange=currentPage==pageCount?imagesApi.length:pageIndex*cardIncrease;for(let i=startRange+1;i<=endRange;i++)createCard(imagesApi[i-1],i-1),createCardSlider(imagesApi[i-1],i-1,"single"),createCardSlider(imagesApi[i-1],i-1,"nav")},handleInfiniteScroll=()=>{setTimeout((()=>{galleryImageBlock.offsetTop+galleryImageBlock.offsetHeight-(window.innerHeight-150)<=(document.documentElement.scrollTop||document.body.scrollTop)&&($(".lightgallery--single").slick("unslick"),$(".lightgallery--nav").slick("unslick"),addCards(currentPage+1),$(".lightgallery--single").slick(getSliderGallerySingleSettings()),$(".lightgallery--nav").slick(getSliderGalleryNavSettings())),currentPage>pageCount&&removeInfiniteScroll()}),500)},removeInfiniteScroll=()=>{loader.remove(),window.removeEventListener("scroll",handleInfiniteScroll)};window.onload=function(){addCards(currentPage),$(".lightgallery--single").slick(getSliderGallerySingleSettings()),$(".lightgallery--nav").slick(getSliderGalleryNavSettings()),window.addEventListener("scroll",handleInfiniteScroll)};